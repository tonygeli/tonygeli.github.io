<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>LILAIQUN</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="LILAIQUN"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="LILAIQUN"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="LILAIQUN"><meta property="og:url" content="https://tonygeli.github.io/"><meta property="og:site_name" content="LILAIQUN"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://tonygeli.github.io/img/og_image.png"><meta property="article:author" content="Tonygeli"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://tonygeli.github.io"},"headline":"LILAIQUN","image":["https://tonygeli.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Tonygeli"},"publisher":{"@type":"Organization","name":"LILAIQUN","logo":{"@type":"ImageObject","url":"https://tonygeli.github.io/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.1.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="LILAIQUN" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-11T07:28:50.000Z" title="2022/3/11 下午3:28:50">2022-03-11</time>发表</span><span class="level-item"><time dateTime="2022-03-31T08:40:10.952Z" title="2022/3/31 下午4:40:10">2022-03-31</time>更新</span><span class="level-item">7 分钟读完 (大约1006个字)</span></div></div><div class="content"><p>[TOC]</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/grey-wolf/p/13034371.html">https://www.cnblogs.com/grey-wolf/p/13034371.html</a></p>
<h3 id="CompletableFuture"><a href="#CompletableFuture" class="headerlink" title="CompletableFuture"></a>CompletableFuture</h3><p>这个completableFuture是JDK1.8版本新引入的类。下面是这个类。实现了俩接口。本身是个class。这个是Future的实现类。</p>
<p>使用completionStage接口去支持完成时触发的函数和操作。</p>
<p>一个completetableFuture就代表了一个任务。他能用Future的方法。还能做一些之前说的executorService配合futures做不了的。</p>
<p>之前future需要等待isDone为true才能知道任务跑完了。或者就是用get方法调用的时候会出现阻塞。而使用completableFuture的使用就可以用then，when等等操作来防止以上的阻塞和轮询isDone的现象出现。</p>
<p>初始类加载器</p>
<p>​	触发符号引用-类</p>
<p>定义类</p>
<p>​	双亲委派原则</p>
<p>类名+定义类加载器完全一样才是同一个类</p>
<p>Sep</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static void main() &#123;</span><br><span class="line">	Count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="线上开启xdebug"><a href="#线上开启xdebug" class="headerlink" title="线上开启xdebug"></a>线上开启xdebug</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SCF_BASE_PKG=&quot;-Dscf.serializer.basepakage=com.anjuke;com.bj58&quot;</span><br><span class="line">if [[ $&#123;WCloud_Env&#125; == &#x27;Product&#x27; || $&#123;WCloud_Env&#125; == &#x27;SandBox&#x27; ]];then</span><br><span class="line">    echo &quot;switch online&quot;</span><br><span class="line">    cp online/*  config/</span><br><span class="line">    JAVA_OPTS=&quot;$&#123;JAVA_OPTS&#125; -Dspring.profiles.active=online&quot;</span><br><span class="line">    test $&#123;WCloud_Env&#125; == &#x27;SandBox&#x27; &amp;&amp; JAVA_OPTS=&quot;$&#123;JAVA_OPTS&#125; -DenabledMock=true -Xdebug -Xrunjdwp:transport=dt_socket,address=9000,server=y,suspend=n &quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;switch test&quot;</span><br><span class="line">    cp offline/*  config/</span><br><span class="line">    JAVA_OPTS=&quot;$&#123;JAVA_OPTS_TEST&#125; -Dspring.profiles.active=offline -DenabledMock=true -Xdebug -Xrunjdwp:transport=dt_socket,address=9000,server=y,suspend=n &quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>



<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h2 id="1-容器的启动"><a href="#1-容器的启动" class="headerlink" title="1.容器的启动"></a>1.容器的启动</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BeanFactory</span><br><span class="line">	ApplicationContext</span><br></pre></td></tr></table></figure>





<h1 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h1><p>线程私有的：程序计数器，虚拟机栈，本地方法栈<br>线程共享的：堆，方法区，直接内存</p>
<p>1.<strong>程序计数器</strong>：是唯一不会出现 OutOfMemoryError 的内存区域，它的生命周期随着线程的创建而创建，随着线程的结束而死亡。</p>
<p>2.<strong>虚拟机栈</strong>：虚拟机栈是由一个个栈帧组成，线程在执行一个方法时，便会向栈中放入一个栈帧，每个栈帧中都拥有局部变量表、操作数栈、动态链接、方法出口信息。局部变量表存放基本数据类型（boolean、byte、char、short、int、float、long、double）和对象引用（reference)。<br>虚拟机栈会出现两种异常：StackOverFlowError 和 OutOfMemoryError。<br>    StackOverFlowError：若Java虚拟机栈的内存大小不允许动态扩展，那么当线程请求栈的深度超过当前Java虚拟机栈的最大深度的时候，就抛出StackOverFlowError异常。<br>    OutOfMemoryError：若 Java 虚拟机栈的内存大小允许动态扩展，且当线程请求栈时内存用完了，无法再动态扩展了，此时抛出OutOfMemoryError异常。</p>
<p>4.堆是Java 虚拟机所管理的内存中最大的一块，几乎所有的对象实例以及数组都在这里分配内存。也被称作GC堆，收集器基本都采用分代垃圾收集算法。分代回收”是基于这样一个事实：对象的生命周期不同，所以针对不同生命周期的对象可以采取不同的回收方式，以便提高回收效率。</p>
<p>读写锁 ReadWriteLock</p>
<p>stampedLock  乐观读</p>
<h2 id="如何相互转换逗号分隔的字符串和List"><a href="#如何相互转换逗号分隔的字符串和List" class="headerlink" title="如何相互转换逗号分隔的字符串和List"></a>如何相互转换逗号分隔的字符串和List</h2><h3 id="一、将逗号分隔的字符串转换为List"><a href="#一、将逗号分隔的字符串转换为List" class="headerlink" title="一、将逗号分隔的字符串转换为List"></a>一、<strong>将逗号分隔的字符串转换为List</strong></h3><p>方法 1： 利用JDK的Arrays类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;a,b,c&quot;</span>;</span><br><span class="line">List&lt;String&gt; result = Arrays.asList(str.split(<span class="string">&quot;,&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>方法 2： 利用Guava的Splitter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;a, b, c&quot;</span>;</span><br><span class="line">List&lt;String&gt; result = Splitter.on(<span class="string">&quot;,&quot;</span>).trimResults().splitToList(str);</span><br></pre></td></tr></table></figure>

<p>方法 3： 利用Apache Commons的StringUtils （只是用了split)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;a,b,c&quot;</span>;</span><br><span class="line">List&lt;String&gt; result = Arrays.asList(StringUtils.split(str,<span class="string">&quot;,&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>方法 4: 利用Spring Framework的StringUtils</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;a,b,c&quot;</span>;</span><br><span class="line"></span><br><span class="line">List&lt;String&gt; str = Arrays.asList(StringUtils.commaDelimitedListToStringArray(str));</span><br></pre></td></tr></table></figure>



<h3 id="二、将List转换为逗号分隔符"><a href="#二、将List转换为逗号分隔符" class="headerlink" title="二、将List转换为逗号分隔符"></a>二、将List转换为逗号分隔符</h3><p>方法 1： 利用JDK  (好像没有很好的方法，需要一步一步实现）</p>
<p>方法 2： 利用Guava的Joiner</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> Joiner.on(<span class="string">&quot;,&quot;</span>).join(list);</span><br></pre></td></tr></table></figure>

<p>方法 3： 利用Apache Commons的StringUtils</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> StringUtils.join(list.toArray(), <span class="string">&quot;,&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>方法 4：利用Spring Framework的StringUtils</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> StringUtils.collectionToDelimitedString(list, <span class="string">&quot;,&quot;</span>);</span><br></pre></td></tr></table></figure>





























</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/03/11/36000Zookeeper/36002ZooKeeper%E7%9A%84%E7%94%A8%E6%88%B7/"><img class="fill" src="/../../images/cover2.jpg" alt="ZooKeeper的用户"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-11T07:18:02.000Z" title="2022/3/11 下午3:18:02">2022-03-11</time>发表</span><span class="level-item"><time dateTime="2022-05-08T11:48:16.337Z" title="2022/5/8 下午7:48:16">2022-05-08</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a></span><span class="level-item">3 分钟读完 (大约400个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/11/36000Zookeeper/36002ZooKeeper%E7%9A%84%E7%94%A8%E6%88%B7/">ZooKeeper的用户</a></h1><div class="content"><h1 id="命名服务、配置管理、集群管理"><a href="#命名服务、配置管理、集群管理" class="headerlink" title="命名服务、配置管理、集群管理"></a>命名服务、配置管理、集群管理</h1><h2 id="命名服务："><a href="#命名服务：" class="headerlink" title="命名服务："></a>命名服务：</h2><p>通过指定的名字来获取资源或者服务地址。Zookeeper可以创建一个全局唯一的路径，这个路径就可以作为一个名字。被命名的实体可以是集群中的机器，服务的地址，或者是远程的对象等。一些分布式服务框架（RPC、RMI）中的服务地址列表，通过使用命名服务，客户端应用能够根据特定的名字来获取资源的实体、服务地址和提供者信息。</p>
<h2 id="配置管理："><a href="#配置管理：" class="headerlink" title="配置管理："></a>配置管理：</h2><p>项目开发，使用的.properties和xml需要配置很多信息，如数据库连接信息、fps地址端口等。程序分布式部署时，如果把程序的这些配置信息保存在zk的znode节点下，当你修改配置，即znode会发生变化时，可以通过改变zk中某个目录节点的内容，利用watcher通知给各个客户端，改变配置。</p>
<h2 id="集群管理："><a href="#集群管理：" class="headerlink" title="集群管理："></a>集群管理：</h2><p>集群管理包括集群监控和集群控制，就是监控集群机器状态，剔除机器和加入机器。zk可以方便集群机器的管理，它可以实时监控znode节点的变化，一旦发生有机器挂了，该机器就会与zk断开连接，对应的目录节点会被删除，其他机器收到通知。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-11T07:02:34.000Z" title="2022/3/11 下午3:02:34">2022-03-11</time>发表</span><span class="level-item"><time dateTime="2022-03-11T07:02:34.000Z" title="2022/3/11 下午3:02:34">2022-03-11</time>更新</span><span class="level-item">5 分钟读完 (大约717个字)</span></div></div><div class="content"><p>[TOC]</p>
<h1 id="三种过期策略："><a href="#三种过期策略：" class="headerlink" title="三种过期策略："></a>三种过期策略：</h1><ol>
<li><p>定时删除</p>
<ul>
<li>含义：<strong>在设置key的过期时间的同时，为该key创建一个定时器，让定时器在key的过期时间来临时，对key进行删除</strong></li>
<li>优点：<strong>保证内存被尽快释放</strong></li>
<li>缺点：若过期key很多，<strong>删除这些key会占用很多的CPU时间</strong>，在CPU时间紧张的情况下，CPU不能把所有的时间用来做要紧的事儿，还需要去花时间删除这些key定时器的创建耗时，若<strong>为每一个设置过期时间的key创建一个定时器（将会有大量的定时器产生），性能影响严重</strong></li>
</ul>
</li>
<li><p>懒汉式删除</p>
<ul>
<li>含义：<strong>key过期的时候不删除，每次通过key获取值的时候去检查是否过期，若过期，则删除，返回null（用的时候再检查           删除）</strong>。</li>
<li>优点：删除操作<strong>只发生在通过key取值的时候发生</strong>，而且只删除当前key，所以<strong>对CPU时间的占用是比较少</strong>的，而且此时的删除是已经到了非做不可的地步（如果此时还不删除的话，我们就会获取到了已经过期的key了）</li>
<li>缺点：若<strong>大量的key在超出超时时间</strong>后，很久一段时间内，都<strong>没有被获取过，那么可能发生内存泄露（无用的垃圾占用了大量的内存）</strong></li>
</ul>
</li>
<li><p>定期删除</p>
<ul>
<li>含义：<strong>每隔一段时间执行一次删除过期key操作</strong></li>
<li>优点：<strong>通过限制删除操作的时长和频率，来减少删除操作对CPU时间的占用–处理”定时删除”的缺点定期删除过期key–处理”懒汉式删除”的缺点</strong><br>缺点：<strong>在内存友好方面，不如”定时删除”（会造成一定的内存占用，但是没有懒汉式那么占用内存）</strong><br> <strong>在CPU时间友好方面，不如”懒汉式删除”（会定期的去进行比较和删除操作，cpu方面不如懒汉式，但是比定时好）</strong></li>
<li>难点：<strong>合理设置删除操作的执行时长（每次删除执行多长时间）和执行频率（每隔多长时间做一次删除）（这个要根据服务器运行情况来定了），每次执行时间太长，或者执行频率太高对cpu都是一种压力</strong>。每次<strong>进行定期删除操作执行之后</strong>，需要<strong>记录遍历循环到了哪个标志位</strong>，以便下一次定期时间来时，从上次位置开始进行循环遍历</li>
</ul>
</li>
</ol>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/03/11/36000Zookeeper/36001ZooKeeper%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%8A%82%E7%82%B9%E7%B1%BB%E5%9E%8B/"><img class="fill" src="/../../images/cover1.jpg" alt="ZooKeeper数据模型和节点类型"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-11T06:53:35.000Z" title="2022/3/11 下午2:53:35">2022-03-11</time>发表</span><span class="level-item"><time dateTime="2022-05-08T11:48:06.319Z" title="2022/5/8 下午7:48:06">2022-05-08</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a></span><span class="level-item">4 分钟读完 (大约531个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/11/36000Zookeeper/36001ZooKeeper%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%8A%82%E7%82%B9%E7%B1%BB%E5%9E%8B/">ZooKeeper数据模型和节点类型</a></h1><div class="content"><h1 id="数据模型和节点类型"><a href="#数据模型和节点类型" class="headerlink" title="数据模型和节点类型"></a>数据模型和节点类型</h1><p>数据模型：树形结构</p>
<p>zk维护的数据主要有：客户端的回话（session）状态及数据节点（dataNode）信息</p>
<p>zk在内存中构造了DataTree的数据结构，维护着path到dataNode的映射以及dataNode间的树状层级关系，为了提高读取性能，集群中每个服务节点都是将数据全量存储在内存中。所以zk适合<strong>读多写少</strong>且<strong>轻量级数据</strong>的应用场景</p>
<p>数据仅存储在内存是很不安全的，zk采用事务日志文件及快照文件的方案来落盘数据，保障数据在不丢失的请求下能快速恢复。</p>
<p>树中的每个节点被称为 Znode</p>
<p>1.Znode兼备文件和目录两种特点。可以做路径标识，也可以存储数据，并可以具有子Znode。具有增删改查等操作。<br>2.Znode具有原子性操作，读操作将获取与节点相关的所有数据，写操作也将替换掉节点的所有数据。另外，每个节点都拥有自己的ACL（访问控制列表），这个列表规定了用户的权限，即限定了特定用户对目标节点可以执行的操作<br>3.Znode数据存储大小有限制，每个Znode的数据大小之多1M，常规使用远小于此值。<br>4.Znode通过路径引用，路径必须是绝对的。</p>
<ul>
<li>持久节点：一旦创建，该数据节点会一直存储在zk服务器上，即使会话关闭了，该节点也不会被删除</li>
<li>临时节点：当创建该节点的客户端因超时或发生异常而关闭时，该节点也应该在zk上被删除。</li>
<li>有序节点：不是一种单独类型的节点，而是在持久节点和临时节点的基础上，增加了一个节点有序的性质。</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-11T06:21:14.000Z" title="2022/3/11 下午2:21:14">2022-03-11</time>发表</span><span class="level-item"><time dateTime="2022-04-29T06:47:18.718Z" title="2022/4/29 下午2:47:18">2022-04-29</time>更新</span><span class="level-item">11 分钟读完 (大约1613个字)</span></div></div><div class="content"><h1 id="数据库优化"><a href="#数据库优化" class="headerlink" title="数据库优化"></a>数据库优化</h1><p>[TOC]</p>
<h2 id="一-索引优化"><a href="#一-索引优化" class="headerlink" title="一.索引优化"></a>一.索引优化</h2><ol>
<li>「覆盖索引」，减少「回表」所消耗的时间。意味着，我们在 select 的时候，一定要指明对应的列，而不是 select *；</li>
<li>「联合索引」。如果组建「联合索引」，尽量将区分度最高的放在最左边，并且需要考虑「最左匹配原则」；</li>
<li>索引列不参与计算，索引失效：<br>3.1 对索引进行函数操作或者表达式计算会导致索引失效；<br>3.2 不符合最左匹配原则<br>3.3 字段进行了隐形数据类型转换<br>3.4 走索引没有走全表扫描效率高</li>
<li>子查询优化超多分页场景。比如 limit offset , n 在 MySQL 是获取 offset + n 的记录，再返回 n 条。而利用子查询则是查出 n 条，通过 ID 检索对应的记录出来，提高查询效率；</li>
<li>通过 explain 命令来查看 SQL 的执行计划，看看自己写的 SQL 是否走了索引，走了什么索引。通过 show profile 来查看 SQL 对系统资源的损耗情况（不过一般还是比较少用到的）；</li>
<li>在开启事务后，在事务内尽可能只操作数据库，并有意识地减少锁的持有时间。比如在事务内需要插入并修改数据，那可以先插入后修改。因为修改是更新操作，会加行锁。如果先更新，那并发下可能会导致多个事务的请求等待行锁释放。</li>
</ol>
<h3 id="即便走对了索引，线上查询还是慢？"><a href="#即便走对了索引，线上查询还是慢？" class="headerlink" title="即便走对了索引，线上查询还是慢？"></a>即便走对了索引，线上查询还是慢？</h3><p>表的数据量实在是太大了。1.考虑能不能把「旧的数据」给”删掉”。对于我们公司而言，我们都会把数据同步到 Hive。2.走一层缓存（Redis）要看业务能不能忍受读取的「非真正实时」的数据（毕竟 Redis 和 MySQL 的数据一致性需要保证）。如果查询条件相对复杂且多变的话（涉及各种group by 和 sum），那走缓存也不是一种好的办法，维护起来就不方便了……</p>
<p>再看看是不是有「字符串」检索的场景导致查询低效，如果是的话，可以考虑把表的数据导入至 Elasticsearch 类的搜索引擎，后续的线上查询就直接走 Elasticsearch 了。MySQL-&gt;Elasticsearch 需要有对应的同步程序（一般就是监听 MySQL 的 binlog，解析 binlog 后导入到 Elasticsearch)。</p>
<p>如果还不是的话，那考虑要不要根据查询条件的维度，做相对应的聚合表。线上的请求就查询聚合表的数据，不走原表。比如，用户下单后有一份订单明细，而订单明细表的量级太大。但在产品侧（前台）透出的查询功能是以「天」维度来展示的，那就可以将每个用户的每天数据聚合起来，在聚合表就是一个用户一天只有一条汇总后的数据。查询走聚合后的表，那速度肯定杠杠的（聚合后的表数据量肯定比原始表要少很多）。思路大致的就是「以空间换时间」，相同的数据换别的地方也存储一份，提高查询效率。</p>
<p><img src="/../../images/640-1212302.jpeg" alt="图片"></p>
<h3 id="除了读之外，写性能同样有瓶颈，怎么办？"><a href="#除了读之外，写性能同样有瓶颈，怎么办？" class="headerlink" title="除了读之外，写性能同样有瓶颈，怎么办？"></a>除了读之外，写性能同样有瓶颈，怎么办？</h3><p>在 MySQL 读写都有瓶颈，那首先看下目前 MySQL 的架构是怎么样的。</p>
<p>1.如果是单库的，那是不是可以考虑升级至主从架构，实现读写分离。<br>简单理解就是主库接收写请求，从库接收读请求。从库的数据由主库发送的 binlog 进而更新，实现主从数据一致（在一般场景下，主从的数据是通过异步来保证最终一致性的）。</p>
<p>2.主从架构下，读写仍存在瓶颈，那就要考虑是否要分库分表了。用户维度分表</p>
<h3 id="分库分表后的-ID-是怎么生成的？"><a href="#分库分表后的-ID-是怎么生成的？" class="headerlink" title="分库分表后的 ID 是怎么生成的？"></a>分库分表后的 ID 是怎么生成的？</h3><ol>
<li>MySQL 自增的 2.借助 Redis 自增的 3.基于「雪花算法」自增的</li>
</ol>
<h3 id="数据迁移"><a href="#数据迁移" class="headerlink" title="数据迁移"></a>数据迁移</h3><p>采取「双写」的方式来进行迁移</p>
<ol>
<li>增量的消息各自往新表和旧表写一份；</li>
<li>将旧表的数据迁移至新库；</li>
<li>迟早新表的数据都会追得上旧表（在某个节点上数据是同步的）；</li>
<li>校验新表和老表的数据是否正常（主要看能不能对得上）；</li>
<li>开启双读（一部分流量走新表，一部分流量走老表），相当于灰度上线的过程；</li>
<li>读流量全部切新表，停止老表的写入；</li>
<li>提前准备回滚机制，临时切换失败能恢复正常业务以及有修数据的相关程序。</li>
</ol>
<h3 id="1-Explain字段"><a href="#1-Explain字段" class="headerlink" title="1.Explain字段"></a>1.Explain字段</h3><table>
<thead>
<tr>
<th>字段</th>
<th>含义</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td></td>
<td></td>
</tr>
<tr>
<td>select_type</td>
<td></td>
<td></td>
</tr>
<tr>
<td>table</td>
<td></td>
<td></td>
</tr>
<tr>
<td>partitions</td>
<td></td>
<td></td>
</tr>
<tr>
<td>type</td>
<td><a href="#Type%E8%AE%BF%E9%97%AE%E6%96%B9%E6%B3%95">访问方法</a></td>
<td>const、ref、ref_or_null、index</td>
</tr>
<tr>
<td>Possible_keys</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Type访问方法</strong></p>
<ul>
<li>const 索引一次命中，匹配一行数据</li>
<li>system 只有一行</li>
<li>eq_ref</li>
<li>ref 非唯一索引，二级索引列与常数等值比较，采用二级索引来执行查询的访问方法</li>
<li>range</li>
<li>index  遍历索引树</li>
<li>all 全表</li>
</ul>
<p><strong>Extra：</strong></p>
<ul>
<li>using filesort 对结果进行外部排序</li>
<li>using index  覆盖索引扫描</li>
<li>using temporary 临时表排序</li>
<li>using where where过滤，效率高</li>
</ul>
<h3 id="2-ACID是靠什么保证的？"><a href="#2-ACID是靠什么保证的？" class="headerlink" title="2.ACID是靠什么保证的？"></a>2.ACID是靠什么保证的？</h3><p>原子性A：由undolog日志来保证，它记录了需要回滚的日志信息，事务回滚时撤销已经执行成功的sql</p>
<p>一致性C：由其他三大特性保证，程序保证业务上的一致性</p>
<p>隔离性I：由MVCC保证</p>
<p>持久性D：由redolog来保证，mysql修改数据的时候会在redolog中记录一份日志数据，就算数据没有保存成功，只要日志保存成功了，数据仍不会丢失。</p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-10T02:15:12.000Z" title="2022/3/10 上午10:15:12">2022-03-10</time>发表</span><span class="level-item"><time dateTime="2022-03-10T02:15:12.000Z" title="2022/3/10 上午10:15:12">2022-03-10</time>更新</span><span class="level-item">2 分钟读完 (大约279个字)</span></div></div><div class="content"><p>[TOC]</p>
<h4 id="1-网络："><a href="#1-网络：" class="headerlink" title="1.网络："></a>1.网络：</h4><ul>
<li>局域网</li>
<li>城域网</li>
<li>广域网</li>
</ul>
<h4 id="2-计算机网络体系结构"><a href="#2-计算机网络体系结构" class="headerlink" title="2.计算机网络体系结构"></a>2.计算机网络体系结构</h4><p>​	各层的关系：每一层建立在低一层的服务上，并为高一层提供服务</p>
<ul>
<li>应用层</li>
<li>传输层</li>
<li>网络层</li>
<li>链路层</li>
</ul>
<p>TCP&#x2F;IP协议族</p>
<p><img src="/../images/image-20201107195657654.png" alt="image-20201107195657654"></p>
<h4 id="3-端口号"><a href="#3-端口号" class="headerlink" title="3.端口号"></a>3.端口号</h4><p>FTP&#x3D;21,SSH&#x3D;22,SMTP&#x3D;25,HTTP服务器&#x3D;80,FTP&#x3D;2000,HTTP客户端&#x3D;2001<br>总共65535个端口号</p>
<h4 id="4-什么是TCP"><a href="#4-什么是TCP" class="headerlink" title="4.什么是TCP"></a>4.什么是TCP</h4><p><strong>TCP基本特性：</strong> Transmission Control Protocol</p>
<ul>
<li>面向连接</li>
<li>可靠性</li>
<li>RTT和RTO (Round trip time传输来回的时间 RTO重传时间)</li>
<li>数据排序</li>
<li>流量控制</li>
<li>全双工</li>
</ul>
<h4 id="5-SYN洪泛攻击"><a href="#5-SYN洪泛攻击" class="headerlink" title="5.SYN洪泛攻击"></a>5.SYN洪泛攻击</h4><p>发送伪造的攻击报文，造成服务端上的半开连接队列被占满，阻止其他用户进行访问。</p>
<p>原理：第一次握手，而服务端的响应（第二次握手）的报文将永远发送不到真实的客户端，客户端在等待第三次握手，服务器在这种半开的连接中消耗了资源。</p>
<p>解决方案：</p>
<ul>
<li>无效连接监控释放</li>
<li>延缓TCB分配方法</li>
<li>防火墙</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-08T08:54:16.000Z" title="2022/3/8 下午4:54:16">2022-03-08</time>发表</span><span class="level-item"><time dateTime="2022-03-08T08:54:16.000Z" title="2022/3/8 下午4:54:16">2022-03-08</time>更新</span><span class="level-item">1 分钟读完 (大约159个字)</span></div></div><div class="content"><h2 id="Gateway基本介绍"><a href="#Gateway基本介绍" class="headerlink" title="Gateway基本介绍"></a>Gateway基本介绍</h2><h3 id="什么是API网关？"><a href="#什么是API网关？" class="headerlink" title="什么是API网关？"></a>什么是API网关？</h3><p>主要起到隔离外部访问与内部系统的作用。解决访问认证、报文转换、访问统计等问题。随着微服务架构概念的提出，API网关成为了微服务架构的一个标配组件。</p>
<p><img src="/../images/image-20220308160345562.png" alt="image-20220308160345562"></p>
<p><img src="/../images/image-20220308160722336.png" alt="image-20220308160722336"></p>
<p><img src="/../images/image-20220308160927021.png" alt="image-20220308160927021"></p>
<p><img src="/../images/image-20220308161038785.png" alt="image-20220308161038785"></p>
<p><img src="/../images/image-20220308161157603.png" alt="image-20220308161157603"></p>
<p><img src="/../images/image-20220308161341389.png" alt="image-20220308161341389"></p>
<p><img src="/../images/image-20220308162518349.png" alt="image-20220308162518349"></p>
<p><img src="/../images/image-20220308162721668.png" alt="image-20220308162721668"></p>
<p><img src="/../images/image-20220308163118695.png" alt="image-20220308163118695"></p>
<p><img src="/../images/image-20220308163245430.png" alt="image-20220308163245430"></p>
<p><img src="/../images/image-20220308163454317.png" alt="image-20220308163454317"></p>
<p><img src="/../images/image-20220308163512428.png" alt="image-20220308163512428"></p>
<p><img src="/../images/image-20220308163633162.png" alt="image-20220308163633162"></p>
<p><img src="/../images/image-20220308164251369.png" alt="image-20220308164251369"></p>
<p><img src="/../images/image-20220308164656761.png" alt="image-20220308164656761"></p>
<p><img src="/../images/image-20220308164808946.png" alt="image-20220308164808946"></p>
<p><img src="/../images/image-20220308164952151.png" alt="image-20220308164952151"></p>
<p><img src="/../images/image-20220308165039964.png" alt="image-20220308165039964"></p>
<p><img src="/../images/image-20220308165414760.png" alt="image-20220308165414760"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-08T07:53:04.000Z" title="2022/3/8 下午3:53:04">2022-03-08</time>发表</span><span class="level-item"><time dateTime="2022-03-08T07:53:04.000Z" title="2022/3/8 下午3:53:04">2022-03-08</time>更新</span><span class="level-item">3 分钟读完 (大约407个字)</span></div></div><div class="content"><h2 id="ZK的命名服务、配置管理、集群管理"><a href="#ZK的命名服务、配置管理、集群管理" class="headerlink" title="ZK的命名服务、配置管理、集群管理"></a>ZK的命名服务、配置管理、集群管理</h2><h3 id="命名服务："><a href="#命名服务：" class="headerlink" title="命名服务："></a>命名服务：</h3><p>通过指定的名字来获取资源或者服务地址。Zookeeper可以创建一个全局唯一的路径，这个路径就可以作为一个名字。被命名的实体可以是集群中的机器，服务的地址，或者是远程的对象等。一些分布式服务框架（RPC、RMI）中的服务地址列表，通过使用命名服务，客户端应用能够根据特定的名字来获取资源的实体、服务地址和提供者信息等</p>
<h3 id="配置管理："><a href="#配置管理：" class="headerlink" title="配置管理："></a>配置管理：</h3><p>实际项目开发中，经常使用.properties或者xml需要配置很多信息，如数据库连接信息、fps地址端口等等。程序分布式部署时，如果把程序的这些配置信息保存在zk的znode节点下，当你需要修改配置，即znode会发生变化时，可以通过改变zk中某个目录节点的内容，利用watcher通知各个客户端，从而更改配置。</p>
<h3 id="集群管理："><a href="#集群管理：" class="headerlink" title="集群管理："></a>集群管理：</h3><p>集群管理包含集群监控和集群控制，就是监控集群机器状态，剔除机器和加入机器。实时监控znode节点的变化，一旦返现机器宕机，该机器就会与zk断开链接，对应的临时目录节点会被删除，其他机器都收到通知，新机器加入也是类似。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-08T06:52:22.000Z" title="2022/3/8 下午2:52:22">2022-03-08</time>发表</span><span class="level-item"><time dateTime="2022-03-08T06:52:22.000Z" title="2022/3/8 下午2:52:22">2022-03-08</time>更新</span><span class="level-item">3 分钟读完 (大约481个字)</span></div></div><div class="content"><h2 id="ZAB协议"><a href="#ZAB协议" class="headerlink" title="ZAB协议"></a>ZAB协议</h2><p>Zookeeper专门设计的一种支持崩溃恢复的原子广播协议，实现分布式数据一致性。</p>
<p>ZK是CP，放弃高可用</p>
<h3 id="消息广播"><a href="#消息广播" class="headerlink" title="消息广播"></a>消息广播</h3><p>Leader节点处理所有事务请求，Leader将客户端的事务请求转换成事务Proposal，并且将Proposal分发给集群中其他所有的Follower。</p>
<p>完成广播后，等待Follower反馈，当有过半数的Follower反馈信息后，Leader将再次向集群中Follower广播Commit信息，Commit信息就是确认之前的Proposal提交。</p>
<p>Leader节点的写入是一个两步操作，第一步是广播事务操作，第二步是广播提交操作。</p>
<h3 id="崩溃恢复"><a href="#崩溃恢复" class="headerlink" title="崩溃恢复"></a>崩溃恢复</h3><ul>
<li>初始化机器，刚刚启动的时候</li>
<li>Leader崩溃，故障宕机</li>
<li>Leader失去半数的机器支持，与集群超过一般的节点断连</li>
</ul>
<p>此时开启新一轮Leader选举，选举产生的Leader会与过半的Follower进行同步，使数据一致，当过半的机器同步完成后，就退出恢复模式，进入消息广播模式</p>
<p><strong>Zxid</strong>是Zab协议的一个事务编号，64位数字，低32是单调递增计数器，针对客户端每一个事务请求，计数器+1，高32位代表Leader周期年代编号。</p>
<p>Leader周期（epoch）可以理解成当前集群所处的年代或者周期，每当有一个新的Leader选举出现，就会从这个Leader服务器上取出其本地日志中最大事务的Zxid，并从中读取epoch值，然后+1，以此作为新的周期ID，高32位代表了每代Leader唯一性，低32位事务的唯一性。</p>
<h3 id="Zab节点的三种状态："><a href="#Zab节点的三种状态：" class="headerlink" title="Zab节点的三种状态："></a>Zab节点的三种状态：</h3><p>following：服从leader的命令</p>
<p>leading：负责协调事务</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-08T06:24:32.000Z" title="2022/3/8 下午2:24:32">2022-03-08</time>发表</span><span class="level-item"><time dateTime="2022-03-08T06:24:32.000Z" title="2022/3/8 下午2:24:32">2022-03-08</time>更新</span><span class="level-item">3 分钟读完 (大约407个字)</span></div></div><div class="content"><h3 id="分布式事务解决方案"><a href="#分布式事务解决方案" class="headerlink" title="分布式事务解决方案"></a>分布式事务解决方案</h3><p>XA规范：分布式事务规范，定义了分布式事务模型</p>
<p>四个角色：事务管理器、资源管理器、应用程序AP、通信资源管理器CRM</p>
<p>全局事务：一个横跨多个数据库的事务，要不全提交，要不全回滚</p>
<h3 id="两阶段提交"><a href="#两阶段提交" class="headerlink" title="两阶段提交"></a>两阶段提交</h3><p>第一阶段：prepare：每个参与执行本地事务但不提交，进入ready状态，并通知协调者已经准备就绪。</p>
<p>第二阶段commint：当协调者确认每个参与者都ready后，通知参与者进行commit操作；如有参与者fail，则发送rollback命令，各参与者做回滚。</p>
<p>问题：</p>
<ul>
<li>单点故障：一旦事务管理器出现故障，整个系统不可用</li>
<li>数据不一致：在二阶段，如果事务管理器只发送部分commit消息，只有部分参与者提交了事务，使得系统数据不一致</li>
<li>响应时间长：参与者资源都被锁，提交、回滚才释放</li>
<li>不确定性：部分参与者commit，事务管理器宕机，新管理器无法确定消息是否成功</li>
</ul>
<h3 id="三阶段提交"><a href="#三阶段提交" class="headerlink" title="三阶段提交"></a>三阶段提交</h3><p>解决2PC单点故障问题，性能和不一致问题没有根本解决</p>
<p>超时机制（可用性提高）：如果消息执行成功，如果一定时间没收到DoCommit消息，自己执行DoCommit操作</p>
<p>TCC（补偿事务）：Try、Confirm、Cancel</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/2/">上一页</a></div><div class="pagination-next"><a href="/page/4/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link is-current" href="/page/3/">3</a></li><li><a class="pagination-link" href="/page/4/">4</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/14/">14</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Tonygeli"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Tonygeli</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>SH</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">132</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">17</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/tonygeli" target="_blank" rel="noopener">关注我</a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Spring/"><span class="level-start"><span class="level-item">Spring</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/SpringBoot/"><span class="level-start"><span class="level-item">SpringBoot</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"><span class="level-start"><span class="level-item">中间件</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">数据库</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BD%91%E7%BB%9C/"><span class="level-start"><span class="level-item">网络</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9D%A2%E8%AF%95/"><span class="level-start"><span class="level-item">面试</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">二月 2022</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">十二月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">十一月 2021</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">九月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">六月 2021</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">二月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Bean/"><span class="tag">Bean</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Icarus/"><span class="tag">Icarus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySql/"><span class="tag">MySql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Netty/"><span class="tag">Netty</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Stream/"><span class="tag">Stream</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TCP/"><span class="tag">TCP</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ZooKeeper/"><span class="tag">ZooKeeper</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96/"><span class="tag">代码优化</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%85%AC%E4%BC%97%E5%8F%B7/"><span class="tag">公众号</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/"><span class="tag">分布式事务</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/"><span class="tag">单点登录</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"><span class="tag">大数据</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BA%BF%E7%A8%8B/"><span class="tag">线程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/"><span class="tag">自动装配</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-07T01:46:49.745Z">2022-05-07</time></p><p class="title"><a href="/2022/05/07/90000%E6%96%87%E7%AB%A0/90012Bean%E8%87%AA%E5%8A%A8%E8%BD%AC%E6%8D%A2%E7%A5%9E%E5%99%A8Mapstruct/">自动转换神器 Mapstruct</a></p><p class="categories"><a href="/categories/Spring/">Spring</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-05T16:00:00.000Z">2022-05-06</time></p><p class="title"><a href="/2022/05/06/90000%E6%96%87%E7%AB%A0/90000Hexo%E9%85%8D%E7%BD%AE%E4%B8%8EIcarus%E4%B8%BB%E9%A2%98/">Hexo配置与Icarus主题</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-05T16:00:00.000Z">2022-05-06</time></p><p class="title"><a href="/2022/05/06/213Linux/Docker/Ubuntu%20LNMP/">Ubuntu LNMP</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-04T16:29:42.493Z">2022-05-05</time></p><p class="title"><a href="/2022/05/05/90000%E6%96%87%E7%AB%A0/90005Stream%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96/">90005Stream代码优化</a></p><p class="categories"><a href="/categories/Java/">Java</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-04-29T15:15:26.673Z">2022-04-29</time></p><p class="title"><a href="/2022/04/29/30000Spring/30101%20SecurityContextHolder/"> </a></p></div></article></div></div><!--!--></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="LILAIQUN" height="28"></a><p class="is-size-7"><span>&copy; 2022 Tonygeli</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>